<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a0033">
    <title>Bug Ball Blitz - Insect Soccer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Version number - always visible -->
    <div class="version">v1.10.0</div>
    
    <div id="gameContainer">
        <!-- Title Screen -->
        <div id="titleScreen" class="screen active">
            <canvas id="menuBackgroundCanvas"></canvas>
            <div class="title-content">
                <div class="game-title">
                    <h1 class="title-main">BUG BALL</h1>
                    <h2 class="title-sub">BLITZ</h2>
                    <div class="soccer-ball">⚽</div>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn primary-btn" id="createProfileBtn">
                    <span class="btn-icon">🐛</span>
                    <span class="btn-text">Create Profile</span>
                </button>
                <button class="menu-btn primary-btn" id="loadProfileBtn">
                    <span class="btn-icon">📂</span>
                    <span class="btn-text">Load Profile</span>
                </button>
                <button class="menu-btn secondary-btn" id="exitBtn">
                    <span class="btn-icon">🚪</span>
                    <span class="btn-text">Exit</span>
                </button>
            </div>
            <button class="dev-btn" id="devClearDataBtn" title="Clear all cached data">
                <span class="dev-icon">🔧</span>
            </button>
            <button class="dev-btn dev-test-btn" id="devTestProfileBtn" title="Create tester profile with everything unlocked">
                <span class="dev-icon">👨‍💻</span>
            </button>
        </div>

        <!-- Profile Creation Screen -->
        <div id="profileCreateScreen" class="screen">
            <h2>Create New Profile</h2>
            <input type="text" id="profileNameInput" placeholder="Enter your name" maxlength="15">
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmProfileBtn">✓ Create</button>
                <button class="menu-btn" id="cancelProfileBtn">✗ Cancel</button>
            </div>
        </div>

        <!-- Profile Load Screen -->
        <div id="profileLoadScreen" class="screen">
            <h2>Load Profile</h2>
            <div id="profileList"></div>
            <div class="menu-buttons">
                <button class="menu-btn" id="backToTitleBtn">← Back</button>
            </div>
        </div>

        <!-- Main Menu -->
        <div id="mainMenu" class="screen">
            <canvas id="mainMenuBackgroundCanvas"></canvas>
            <div class="menu-content">
                <h2>Main Menu</h2>
                <div id="profileInfo" class="profile-info"></div>
                <div class="menu-buttons">
                    <button class="menu-btn" id="towerCampaignBtn">🏆 Tower Campaign</button>
                    <button class="menu-btn" id="quickPlayBtn">⚡ Quick Play</button>
                    <button class="menu-btn" id="localMultiplayerBtn">🎮 Local Multiplayer</button>
                    <button class="menu-btn" id="arcadeModeBtn">🎯 Arcade Mode</button>
                    <button class="menu-btn" id="tutorialBtn">📖 How to Play</button>
                    <button class="menu-btn" id="stylesBtn">✨ Styles</button>
                    <button class="menu-btn" id="achievementsBtn">🏅 Achievements</button>
                    <button class="menu-btn" id="viewStatsBtn">📊 View Stats</button>
                    <button class="menu-btn" id="saveProgressBtn">💾 Save Progress</button>
                    <button class="menu-btn" id="logoutBtn">🔙 Logout</button>
                </div>
            </div>
        </div>

        <!-- Tower Level Select Screen -->
        <div id="towerLevelSelectScreen" class="screen">
            <h2>🏆 Tower Campaign - Select Level</h2>
            <div class="tower-level-grid" id="towerLevelGrid">
                <!-- Levels will be generated dynamically -->
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="continueTowerBtn">▶️ Continue Campaign</button>
                <button class="menu-btn" id="cancelTowerSelectBtn">← Back</button>
            </div>
        </div>

        <!-- Tutorial Screen -->
        <div id="tutorialScreen" class="screen">
            <h2>📖 How to Play</h2>
            <div class="tutorial-content">
                <div class="tutorial-section">
                    <h3>🎯 Objective</h3>
                    <p>Score more goals than your opponent before time runs out!</p>
                </div>
                
                <div class="tutorial-section">
                    <h3>🎮 Controls</h3>
                    <div class="controls-grid">
                        <div class="control-item">
                            <strong>Keyboard:</strong>
                            <ul>
                                <li>← → Arrow Keys: Move left/right</li>
                                <li>↑ Arrow Key / Space: Jump</li>
                            </ul>
                        </div>
                        <div class="control-item">
                            <strong>Touch (Mobile):</strong>
                            <ul>
                                <li>Joystick: Move left/right</li>
                                <li>Jump Button: Jump</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="tutorial-section">
                    <h3>⚽ Gameplay Tips</h3>
                    <ul>
                        <li>🐛 Each bug has unique stats (Speed, Jump, Power)</li>
                        <li>🏟️ Different arenas have different sizes and layouts</li>
                        <li>💨 Build momentum by running before hitting the ball</li>
                        <li>🎯 Jump to head the ball for more control</li>
                        <li>🛡️ Defend your goal and attack theirs!</li>
                    </ul>
                </div>
                
                <div class="tutorial-section">
                    <h3>🏆 Game Modes</h3>
                    <ul>
                        <li><strong>Tower Campaign:</strong> Progress through 20 levels</li>
                        <li><strong>Quick Play:</strong> Single match against AI</li>
                        <li><strong>Local Multiplayer:</strong> Play with a friend</li>
                    </ul>
                </div>
                
                <div class="tutorial-section">
                    <h3>🏅 Progression</h3>
                    <p>Unlock new bugs, arenas, and celebrations by completing achievements!</p>
                    <ul>
                        <li>Win matches to unlock Grasshopper</li>
                        <li>Win 10 matches to unlock Beetle</li>
                        <li>Score goals to unlock Ant and Spider</li>
                        <li>Explore all arenas and celebrations!</li>
                    </ul>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn primary-btn" id="backToMainFromTutorialBtn">Got it!</button>
            </div>
        </div>

        <!-- Arcade Mode Screens -->
        <!-- Arcade Player Count Screen -->
        <div id="arcadePlayerCountScreen" class="screen">
            <h2>🎯 Arcade Mode - Player Count</h2>
            <p class="arcade-subtitle">Choose your game mode</p>
            <div class="menu-buttons">
                <button class="menu-btn primary-btn" id="arcadeSinglePlayerBtn">
                    <span class="btn-icon">👤</span>
                    <span class="btn-text">Single Player</span>
                </button>
                <button class="menu-btn primary-btn" id="arcadeMultiplayerBtn">
                    <span class="btn-icon">👥</span>
                    <span class="btn-text">Local Multiplayer</span>
                </button>
                <button class="menu-btn" id="backFromArcadeCountBtn">← Back</button>
            </div>
        </div>

        <!-- Arcade Team Setup Screen -->
        <div id="arcadeTeamSetupScreen" class="screen">
            <h2>🎯 Arcade Mode - Team Setup</h2>
            <div class="arcade-content">
                <!-- Left Team (Player 1) -->
                <div class="team-setup-section">
                    <h3>🔵 Left Team</h3>
                    
                    <div class="arcade-setting">
                        <label>
                            <input type="checkbox" id="leftHumanPlayerCheckbox" checked style="margin-right: 8px;">
                            Add Human Player
                        </label>
                        <small class="setting-hint">Uncheck for AI-only team (spectator mode)</small>
                    </div>
                    
                    <div class="arcade-setting">
                        <label>AI Players:</label>
                        <div class="slider-container">
                            <input type="range" id="leftAICountSlider" min="0" max="2" value="0" step="1" class="arcade-slider">
                            <span class="slider-value" id="leftAICountValue">0</span>
                        </div>
                        <small class="setting-hint" id="leftTeamComposition">1 Human, 0 AI</small>
                    </div>
                    
                    <div class="arcade-setting ai-setting" id="leftAIDifficultyContainer" style="display: none;">
                        <label>AI Difficulty:</label>
                        <select id="leftAIDifficulty" class="arcade-select">
                            <option value="easy">🟢 Easy</option>
                            <option value="medium" selected>🟡 Medium</option>
                            <option value="hard">🟠 Hard</option>
                            <option value="pro">🔴 Pro</option>
                        </select>
                    </div>
                    
                    <div class="arcade-setting ai-setting" id="leftAIPersonalityContainer" style="display: none;">
                        <label>AI Personality:</label>
                        <select id="leftAIPersonality" class="arcade-select">
                            <option value="balanced" selected>⚖️ Balanced</option>
                            <option value="aggressive">⚔️ Aggressive</option>
                            <option value="defensive">🛡️ Defensive</option>
                        </select>
                    </div>
                </div>

                <!-- Right Team (Player 2 in multiplayer) -->
                <div class="team-setup-section">
                    <h3>🔴 Right Team</h3>
                    
                    <div class="arcade-setting">
                        <label>
                            <input type="checkbox" id="rightHumanPlayerCheckbox" style="margin-right: 8px;">
                            Add Human Player
                        </label>
                        <small class="setting-hint">Check to add a human player to this team</small>
                    </div>
                    
                    <div class="arcade-setting">
                        <label>AI Players:</label>
                        <div class="slider-container">
                            <input type="range" id="rightAICountSlider" min="0" max="2" value="1" step="1" class="arcade-slider">
                            <span class="slider-value" id="rightAICountValue">1</span>
                        </div>
                        <small class="setting-hint" id="rightTeamComposition">0 Human, 1 AI</small>
                    </div>
                    
                    <div class="arcade-setting ai-setting" id="rightAIDifficultyContainer">
                        <label>AI Difficulty:</label>
                        <select id="rightAIDifficulty" class="arcade-select">
                            <option value="easy">🟢 Easy</option>
                            <option value="medium" selected>🟡 Medium</option>
                            <option value="hard">🟠 Hard</option>
                            <option value="pro">🔴 Pro</option>
                        </select>
                    </div>
                    
                    <div class="arcade-setting ai-setting" id="rightAIPersonalityContainer">
                        <label>AI Personality:</label>
                        <select id="rightAIPersonality" class="arcade-select">
                            <option value="balanced" selected>⚖️ Balanced</option>
                            <option value="aggressive">⚔️ Aggressive</option>
                            <option value="defensive">🛡️ Defensive</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn primary-btn" id="arcadeTeamNextBtn">Next →</button>
                <button class="menu-btn" id="backFromArcadeTeamBtn">← Back</button>
            </div>
        </div>

        <!-- Arcade Game Settings Screen -->
        <div id="arcadeSettingsScreen" class="screen">
            <h2>🎯 Arcade Mode - Game Settings</h2>
            <div class="arcade-settings-grid">
                <div class="arcade-setting">
                    <label>Player Gravity:</label>
                    <div class="slider-container">
                        <input type="range" id="playerGravitySlider" min="0.5" max="2" step="0.1" value="1" class="arcade-slider">
                        <span class="slider-value" id="playerGravityValue">1.0x</span>
                    </div>
                </div>
                
                <div class="arcade-setting">
                    <label>Ball Gravity:</label>
                    <div class="slider-container">
                        <input type="range" id="ballGravitySlider" min="0.5" max="2" step="0.1" value="1" class="arcade-slider">
                        <span class="slider-value" id="ballGravityValue">1.0x</span>
                    </div>
                </div>
                
                <div class="arcade-setting">
                    <label>Player Size:</label>
                    <div class="slider-container">
                        <input type="range" id="playerSizeSlider" min="0.5" max="2" step="0.1" value="1" class="arcade-slider">
                        <span class="slider-value" id="playerSizeValue">1.0x</span>
                    </div>
                </div>
                
                <div class="arcade-setting">
                    <label>Ball Size:</label>
                    <div class="slider-container">
                        <input type="range" id="ballSizeSlider" min="0.5" max="2" step="0.1" value="1" class="arcade-slider">
                        <span class="slider-value" id="ballSizeValue">1.0x</span>
                    </div>
                </div>
                
                <div class="arcade-setting">
                    <label>Match Time:</label>
                    <div class="slider-container">
                        <input type="range" id="arcadeTimeSlider" min="1" max="10" value="3" class="arcade-slider">
                        <span class="slider-value" id="arcadeTimeValue">3 min</span>
                    </div>
                </div>
                
                <div class="arcade-setting">
                    <label>Score to Win:</label>
                    <div class="slider-container">
                        <input type="range" id="arcadeScoreSlider" min="3" max="15" value="5" class="arcade-slider">
                        <span class="slider-value" id="arcadeScoreValue">5 goals</span>
                    </div>
                </div>

                <div class="arcade-setting">
                    <label>Ball Speed:</label>
                    <div class="slider-container">
                        <input type="range" id="ballSpeedSlider" min="0.5" max="2" step="0.1" value="1" class="arcade-slider">
                        <span class="slider-value" id="ballSpeedValue">1.0x</span>
                    </div>
                </div>

                <div class="arcade-setting">
                    <label>Jump Power:</label>
                    <div class="slider-container">
                        <input type="range" id="jumpPowerSlider" min="0.5" max="2" step="0.1" value="1" class="arcade-slider">
                        <span class="slider-value" id="jumpPowerValue">1.0x</span>
                    </div>
                </div>
                
                <div class="arcade-setting">
                    <label>Number of Balls:</label>
                    <div class="slider-container">
                        <input type="range" id="ballCountSlider" min="1" max="3" value="1" class="arcade-slider">
                        <span class="slider-value" id="ballCountValue">1</span>
                    </div>
                    <small class="setting-hint">Play with multiple balls at once!</small>
                </div>
                
                <div class="arcade-setting">
                    <label>Weather Effects:</label>
                    <select id="weatherSelect" class="arcade-select">
                        <option value="none">☀️ None</option>
                        <option value="rain">🌧️ Rain</option>
                        <option value="snow">❄️ Snow</option>
                        <option value="wind">💨 Wind</option>
                    </select>
                    <small class="setting-hint">Weather slightly affects ball physics</small>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn primary-btn" id="startArcadeBtn">Start Match!</button>
                <button class="menu-btn" id="backFromArcadeSettingsBtn">← Back</button>
            </div>
        </div>

        <!-- Styles Screen -->
        <div id="stylesScreen" class="screen">
            <h2>🎨 Celebrations & Animations</h2>
            <p class="styles-subtitle">Customize your victory style!</p>
            
            <!-- Top Back Button -->
            <div class="menu-buttons" style="margin-bottom: 15px;">
                <button class="menu-btn" id="backToMainFromStylesTopBtn">← Back</button>
            </div>
            
            <!-- Tab Navigation -->
            <div class="style-tabs">
                <button class="style-tab active" id="celebrationsTab">Goal Celebrations</button>
                <button class="style-tab" id="bugAnimationsTab">Bug Animations</button>
                <button class="style-tab" id="cosmeticsTab">Cosmetics</button>
            </div>
            
            <!-- Celebrations Tab Content -->
            <div id="celebrationsTabContent" class="tab-content active">
                <p class="tab-description">Choose how the field celebrates when you score!</p>
                <div id="celebrationGrid" class="celebration-grid"></div>
            </div>
            
            <!-- Bug Animations Tab Content -->
            <div id="bugAnimationsTabContent" class="tab-content">
                <p class="tab-description">Choose how your bug dances after scoring!</p>
                <div id="bugAnimationGrid" class="celebration-grid"></div>
            </div>
            
            <!-- Cosmetics Tab Content -->
            <div id="cosmeticsTabContent" class="tab-content">
                <p class="tab-description">Equip up to 3 cosmetics! They affect your hitbox!</p>
                
                <!-- Equipped Cosmetics Display -->
                <div class="equipped-cosmetics">
                    <h3>Equipped (Click to unequip):</h3>
                    <div id="equippedCosmeticsDisplay" class="equipped-list"></div>
                </div>
                
                <!-- Cosmetic Categories -->
                <div class="cosmetic-filters">
                    <button class="filter-btn active" data-category="all">All</button>
                    <button class="filter-btn" data-category="hat">Hats</button>
                    <button class="filter-btn" data-category="glasses">Glasses</button>
                    <button class="filter-btn" data-category="accessory">Accessories</button>
                    <button class="filter-btn" data-category="special">Special</button>
                </div>
                
                <div id="cosmeticsGrid" class="celebration-grid"></div>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn" id="backToMainFromStylesBtn">← Back</button>
            </div>
        </div>

        <!-- Stats Screen -->
        <div id="statsScreen" class="screen">
            <h2>Player Stats</h2>
            <div id="statsDisplay"></div>
            <div class="menu-buttons">
                <button class="menu-btn" id="backToMainBtn">← Back</button>
            </div>
        </div>

        <!-- Achievements Screen -->
        <div id="achievementsScreen" class="screen">
            <h2>🏅 Achievements</h2>
            <div class="achievement-progress">
                <div class="progress-text">
                    <span id="achievementCount">0/18</span> Unlocked
                    <span class="progress-percentage" id="achievementPercentage">0%</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="achievementProgressBar"></div>
                </div>
            </div>
            <div class="achievement-filters">
                <button class="filter-btn active" data-category="all">All</button>
                <button class="filter-btn" data-category="goals">Goals</button>
                <button class="filter-btn" data-category="wins">Wins</button>
                <button class="filter-btn" data-category="perfect">Perfect</button>
                <button class="filter-btn" data-category="special">Special</button>
                <button class="filter-btn" data-category="collection">Collection</button>
            </div>
            <div id="achievementGrid" class="achievement-grid"></div>
            <div class="menu-buttons">
                <button class="menu-btn" id="backToMainFromAchievementsBtn">← Back</button>
            </div>
        </div>

        <!-- Bug Selection Screen -->
        <div id="bugSelectScreen" class="screen">
            <h2>Select Your Bug</h2>
            <div id="bugGrid" class="bug-grid"></div>
            <div class="menu-buttons">
                <button class="menu-btn" id="cancelBugSelectBtn">← Back</button>
            </div>
        </div>

        <!-- Difficulty Selection (Quick Play) -->
        <div id="difficultyScreen" class="screen">
            <h2>Select Difficulty</h2>
            <p class="difficulty-subtitle">Choose your challenge level</p>
            <div class="difficulty-grid">
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-difficulty="easy">
                        <span class="diff-icon">😊</span>
                        <span class="diff-name">Easy</span>
                    </button>
                    <p class="diff-description">Relaxed opponent, perfect for beginners</p>
                </div>
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-difficulty="medium">
                        <span class="diff-icon">😐</span>
                        <span class="diff-name">Medium</span>
                    </button>
                    <p class="diff-description">Balanced challenge, good reflexes needed</p>
                </div>
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-difficulty="hard">
                        <span class="diff-icon">😠</span>
                        <span class="diff-name">Hard</span>
                    </button>
                    <p class="diff-description">Aggressive opponent, requires skill</p>
                </div>
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-difficulty="pro">
                        <span class="diff-icon">😈</span>
                        <span class="diff-name">Pro</span>
                    </button>
                    <p class="diff-description">Master-level AI, ultimate challenge!</p>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="cancelDifficultyBtn">← Back</button>
            </div>
        </div>

        <!-- Match Length Selection -->
        <div id="matchLengthScreen" class="screen">
            <h2>Match Duration</h2>
            <p class="difficulty-subtitle">Choose how long you want to play</p>
            <div class="difficulty-grid">
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-length="60">
                        <span class="diff-icon">⚡</span>
                        <span class="diff-name">1 Minute</span>
                    </button>
                    <p class="diff-description">Quick match, fast-paced action</p>
                </div>
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-length="120">
                        <span class="diff-icon">⏱️</span>
                        <span class="diff-name">2 Minutes</span>
                    </button>
                    <p class="diff-description">Standard match, balanced gameplay</p>
                </div>
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-length="180">
                        <span class="diff-icon">⏳</span>
                        <span class="diff-name">3 Minutes</span>
                    </button>
                    <p class="diff-description">Extended match, more strategic</p>
                </div>
                <div class="difficulty-card">
                    <button class="menu-btn difficulty-btn" data-length="300">
                        <span class="diff-icon">🏆</span>
                        <span class="diff-name">5 Minutes</span>
                    </button>
                    <p class="diff-description">Epic match, ultimate endurance!</p>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="cancelMatchLengthBtn">← Back</button>
            </div>
        </div>

        <!-- Arena Selection -->
        <div id="arenaSelectScreen" class="screen">
            <h2>Select Arena</h2>
            <div id="arenaGrid" class="arena-grid"></div>
            <div class="menu-buttons">
                <button class="menu-btn" id="cancelArenaSelectBtn">← Back</button>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="screen" style="display: none;">
            <div class="loading-content">
                <h2 class="loading-title">Tower Mode</h2>
                <div class="tower-visual" id="towerVisual">
                    <!-- Tower levels will be generated here -->
                </div>
                <div class="current-level-info">
                    <div class="level-name" id="loadingLevelName">Tutorial Match</div>
                    <div class="level-difficulty" id="loadingLevelDifficulty">Easy</div>
                    <div class="level-weather" id="loadingWeather" style="display: none;">Weather: ☀️ Clear</div>
                </div>
                <p class="loading-text">Get Ready...</p>
            </div>
        </div>

        <!-- Game Canvas -->
        <div id="gameScreen" class="screen">
            <canvas id="gameCanvas"></canvas>
            <div id="gameHUD" class="hud">
                <div class="score-display">
                    <span id="player1Score">0</span> - <span id="player2Score">0</span>
                </div>
                <div class="timer-display" id="timerDisplay">2:00</div>
                <button class="pause-btn" id="pauseBtn">⏸</button>
            </div>
            <!-- Mobile Controls -->
            <div id="mobileControls" class="mobile-controls">
                <div class="joystick-container">
                    <div class="joystick" id="joystick">
                        <div class="joystick-stick"></div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn" id="jumpBtn">JUMP</button>
                </div>
            </div>
            <!-- Player 2 Mobile Controls (Tablets Only) -->
            <div id="mobileControlsP2" class="mobile-controls mobile-controls-p2">
                <div class="joystick-container">
                    <div class="joystick" id="joystickP2">
                        <div class="joystick-stick"></div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn" id="jumpBtnP2">JUMP</button>
                </div>
            </div>
        </div>

        <!-- Settings Menu -->
        <div id="settingsMenu" class="overlay-menu">
            <div class="menu-panel settings-panel">
                <h2>⚙️ Settings</h2>
                <div class="settings-options">
                    <!-- Volume Controls -->
                    <div class="setting-section">
                        <h3>🔊 Audio</h3>
                        
                        <div class="setting-item slider-item">
                            <label for="soundVolumeSlider">
                                <span>Sound Effects</span>
                                <span class="volume-value" id="soundVolumeValue">70%</span>
                            </label>
                            <input type="range" id="soundVolumeSlider" min="0" max="100" value="70" class="volume-slider">
                        </div>
                        
                        <div class="setting-item slider-item">
                            <label for="musicVolumeSlider">
                                <span>Music</span>
                                <span class="volume-value" id="musicVolumeValue">50%</span>
                            </label>
                            <input type="range" id="musicVolumeSlider" min="0" max="100" value="50" class="volume-slider">
                        </div>
                        
                        <div class="setting-item">
                            <label for="hapticToggle">
                                <span>Haptic Feedback</span>
                                <small>Vibration on mobile devices</small>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="hapticToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Controls -->
                    <div class="setting-section">
                        <h3>🎮 Controls</h3>
                        
                        <div class="setting-item">
                            <label for="touchControlsToggle">
                                <span>Touch Controls</span>
                                <small>Enable on-screen touch controls</small>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="touchControlsToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Graphics -->
                    <div class="setting-section">
                        <h3>🎨 Graphics</h3>
                        
                        <div class="setting-item">
                            <label for="qualitySelect">
                                <span>Quality</span>
                                <small>Adjust graphics quality for performance</small>
                            </label>
                            <select id="qualitySelect" class="quality-select">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label for="fullscreenToggle">
                                <span>Fullscreen Mode</span>
                                <small>Toggle fullscreen display</small>
                            </label>
                            <button class="fullscreen-btn" id="fullscreenBtn" title="Toggle Fullscreen">⛶</button>
                        </div>
                    </div>
                </div>
                <div class="menu-buttons">
                    <button class="menu-btn primary-btn" id="closeSettingsBtn">✓ Done</button>
                </div>
            </div>
        </div>

        <!-- Arena Preview Modal -->
        <div id="arenaPreviewModal" class="modal">
            <div class="modal-content arena-preview-content">
                <span class="close-modal" id="closeArenaPreview">&times;</span>
                <h2 id="arenaPreviewTitle">Arena Name</h2>
                <canvas id="arenaPreviewCanvas" width="600" height="400"></canvas>
                <div id="arenaPreviewDescription" class="arena-description"></div>
                
                <!-- Match Length Selection in Arena Preview -->
                <div id="arenaMatchLengthSection" class="match-settings-section">
                    <div class="slider-container">
                        <label for="matchLengthSlider">
                            <span class="slider-icon">⏱️</span>
                            <span class="slider-label">Match Duration:</span>
                            <span class="slider-value" id="matchLengthValue">2 Minutes</span>
                        </label>
                        <input type="range" id="matchLengthSlider" min="1" max="5" value="2" step="1" list="matchLengthMarkers">
                        <datalist id="matchLengthMarkers">
                            <option value="1" label="1m"></option>
                            <option value="2" label="2m"></option>
                            <option value="3" label="3m"></option>
                            <option value="4" label="4m"></option>
                            <option value="5" label="5m"></option>
                        </datalist>
                    </div>
                </div>
                
                <!-- Score to Win Selection in Arena Preview -->
                <div id="arenaScoreToWinSection" class="match-settings-section">
                    <div class="slider-container">
                        <label for="scoreToWinSlider">
                            <span class="slider-icon">⚽</span>
                            <span class="slider-label">Score to Win:</span>
                            <span class="slider-value" id="scoreToWinValue">5 Goals</span>
                        </label>
                        <input type="range" id="scoreToWinSlider" min="3" max="10" value="5" step="1" list="scoreToWinMarkers">
                        <datalist id="scoreToWinMarkers">
                            <option value="3" label="3"></option>
                            <option value="5" label="5"></option>
                            <option value="7" label="7"></option>
                            <option value="10" label="10"></option>
                        </datalist>
                    </div>
                </div>
                
                <div class="modal-buttons">
                    <button class="menu-btn secondary-btn" id="cancelArenaPreviewBtn">Cancel</button>
                    <button class="menu-btn primary-btn" id="selectArenaPreviewBtn">Select Arena</button>
                </div>
            </div>
        </div>

        <!-- Pause Menu -->
        <div id="pauseMenu" class="overlay-menu">
            <div class="menu-panel pause-panel">
                <h2>⏸️ Paused</h2>
                <div class="pause-info">
                    <div class="pause-score">
                        <span id="pauseScore1" class="score-display">0</span>
                        <span class="score-separator">-</span>
                        <span id="pauseScore2" class="score-display">0</span>
                    </div>
                    <div class="pause-time" id="pauseTimeDisplay">0:00</div>
                </div>
                <div class="menu-buttons">
                    <button class="menu-btn primary-btn" id="resumeBtn">▶️ Resume</button>
                    <button class="menu-btn" id="restartMatchBtn">🔄 Restart Match</button>
                    <button class="menu-btn" id="pauseSettingsBtn">⚙️ Settings</button>
                    <button class="menu-btn danger-btn" id="quitToMenuBtn">🏠 Quit to Menu</button>
                </div>
            </div>
        </div>

        <!-- Match End Screen -->
        <div id="matchEndScreen" class="overlay-menu">
            <div class="menu-panel">
                <h2 id="matchResultTitle">Victory!</h2>
                <div id="matchStats"></div>
                <div class="menu-buttons">
                    <button class="menu-btn" id="continueBtn">Continue</button>
                    <button class="menu-btn" id="rematchBtn">Rematch</button>
                    <button class="menu-btn" id="endToMenuBtn">Main Menu</button>
                </div>
            </div>
        </div>

        <!-- Tower Victory Screen -->
        <div id="towerVictoryScreen" class="overlay-menu">
            <div class="menu-panel">
                <h2>🏆 TOWER COMPLETE! 🏆</h2>
                <p class="victory-text">You've conquered all challenges!</p>
                <div id="towerVictoryStats"></div>
                <div class="menu-buttons">
                    <button class="menu-btn" id="towerDoneBtn">Main Menu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script type="module" src="main.js"></script>
</body>
</html>
